<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ethlo geodata server</title>

<link rel="stylesheet"
	href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"
	integrity="sha384-" crossorigin="anonymous">
<link rel="stylesheet"
	href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
<link rel="stylesheet"
	href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<link rel="stylesheet" href="css/layouts/marketing.css">

<style>
.done {
	color: green;
}

.waiting {
	color: #34495e;
}

th {text-align:left;}

</style>
</head>
<body style="background: #1f8dd6">


	<div class="header">
		<div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
			<a class="pure-menu-heading" href="http://ethlo.com">ethlo</a>

			<ul class="pure-menu-list">
				<li class="pure-menu-item"><a href="#" class="pure-menu-link">Home</a></li>
				<li class="pure-menu-item"><a href="/api.html"
					class="pure-menu-link">API documentation</a></li>
				<li class="pure-menu-item"><a
					href="https://github.com/ethlo/geodata" class="pure-menu-link">GitHub</a></li>
			</ul>
		</div>
	</div>


<div class="splash-container">

	<div style="float:right; margin-top:50px; padding:15px; width:300px; background:white">
		<h2>Loading data, please wait...</h2>
		<table>
			<tr>
				<th style="width:200px;">Geo Hierarchies</th>
				<td data-bean="hierarchies" style="width:80px;">Waiting</td>
			</tr>
			<tr>
				<th>Geo IPs</th>
				<td data-bean="ips">Waiting</td>
			</tr>
			<tr>
				<th>Geo Locations</th>
				<td data-bean="locations">Waiting</td>
			</tr>
			<tr>
				<th>Geo location MBRs</th>
				<td data-bean="mbr">Waiting</td>
			</tr>

		</table>
	</div>

    <div class="splash">
        <h1 class="splash-head">ethlo geodata server</h1>
        <p class="splash-subhead">
            Simple, fast and free geodata server for on-site deployment
        </p>
        <p>
            <a href="https://github.com/ethlo/geodata" class="pure-button pure-button-primary">GitHub</a>
        </p>
    </div>
</div>

	<div class="footer l-box is-center">Copyright Morten Haraldsen
		2017-2018</div>

	<script>
		var source = new EventSource('/init.stream');
		var initialized = 0;
		source.addEventListener('message', function(e) {
			
			var arr = e.data.split(":");
			var name = arr[0];
			var progress = parseFloat(Math.round(arr[1] * 100)).toFixed(2);
			
			var ele = document.querySelector('td[data-bean="' + name + '"]');
			if (ele) {
				ele.innerHTML = progress + ' %';
			}
		});

		source.addEventListener('complete', function(e) {
			window.location.reload();
		});
	</script>

</body>
</html>